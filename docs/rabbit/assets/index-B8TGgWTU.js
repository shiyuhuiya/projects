import{H as ue,I as ee,J as ce,K as G,L as fe,M as H,N as ve,C as R,O as pe,o as v,c as b,e,P as L,Q as A,m as o,t as c,a as E,w as m,d as Z,R as _e,S as he,q as O,T as oe,U as se,V as ye,W as Q,X as le,Y as me,Z as ge,$ as W,r as g,a0 as Ce,a1 as be,a2 as ke,a3 as Ie,a4 as X,a5 as $e,a6 as we,a7 as Te,a8 as x,a9 as Ae,aa as De,ab as Ee,ac as Fe,ad as Pe,j as Se,ae as Be,af as Le,ag as Re,ah as Oe,ai as Me,aj as Ne,ak as Ve,al as ze,am as qe,an as te,n as D,F as j,b as K,G as ae,_ as Ue,D as je,s as Ke,v as Ze}from"./index-Bexy76dz.js";import{i as Ge}from"./isUndefined-DCTLXrZ8.js";const Je=(...s)=>i=>{s.forEach(l=>{ue(l)?l(i):l.value=i})},ne=Symbol("dialogInjectionKey"),de=ee({center:Boolean,alignCenter:Boolean,closeIcon:{type:ce},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ye={close:()=>!0},He=["aria-level"],Qe=["aria-label"],We=["id"],Xe=G({name:"ElDialogContent"}),xe=G({...Xe,props:de,emits:Ye,setup(s){const i=s,{t:l}=fe(),{Close:f}=ye,{dialogRef:d,headerRef:h,bodyId:I,ns:u,style:$}=H(ne),{focusTrapRef:p}=H(ve),y=R(()=>[u.b(),u.is("fullscreen",i.fullscreen),u.is("draggable",i.draggable),u.is("align-center",i.alignCenter),{[u.m("center")]:i.center}]),C=Je(p,d),_=R(()=>i.draggable),t=R(()=>i.overflow);return pe(d,h,_,t),(n,r)=>(v(),b("div",{ref:o(C),class:A(o(y)),style:oe(o($)),tabindex:"-1"},[e("header",{ref_key:"headerRef",ref:h,class:A([o(u).e("header"),{"show-close":n.showClose}])},[L(n.$slots,"header",{},()=>[e("span",{role:"heading","aria-level":n.ariaLevel,class:A(o(u).e("title"))},c(n.title),11,He)]),n.showClose?(v(),b("button",{key:0,"aria-label":o(l)("el.dialog.close"),class:A(o(u).e("headerbtn")),type:"button",onClick:r[0]||(r[0]=w=>n.$emit("close"))},[E(o(he),{class:A(o(u).e("close"))},{default:m(()=>[(v(),Z(_e(n.closeIcon||o(f))))]),_:1},8,["class"])],10,Qe)):O("v-if",!0)],2),e("div",{id:o(I),class:A(o(u).e("body"))},[L(n.$slots,"default")],10,We),n.$slots.footer?(v(),b("footer",{key:0,class:A(o(u).e("footer"))},[L(n.$slots,"footer")],2)):O("v-if",!0)],6))}});var eo=se(xe,[["__file","dialog-content.vue"]]);const oo=ee({...de,appendToBody:Boolean,appendTo:{type:Q(String),default:"body"},beforeClose:{type:Q(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),so={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[le]:s=>me(s),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},lo=(s,i)=>{var l;const d=Te().emit,{nextZIndex:h}=ge();let I="";const u=W(),$=W(),p=g(!1),y=g(!1),C=g(!1),_=g((l=s.zIndex)!=null?l:h());let t,n;const r=Ce("namespace",be),w=R(()=>{const T={},B=`--${r.value}-dialog`;return s.fullscreen||(s.top&&(T[`${B}-margin-top`]=s.top),s.width&&(T[`${B}-width`]=ke(s.width))),T}),M=R(()=>s.alignCenter?{display:"flex"}:{});function z(){d("opened")}function J(){d("closed"),d(le,!1),s.destroyOnClose&&(C.value=!1)}function Y(){d("close")}function q(){n==null||n(),t==null||t(),s.openDelay&&s.openDelay>0?{stop:t}=x(()=>U(),s.openDelay):U()}function N(){t==null||t(),n==null||n(),s.closeDelay&&s.closeDelay>0?{stop:n}=x(()=>a(),s.closeDelay):a()}function V(){function T(B){B||(y.value=!0,p.value=!1)}s.beforeClose?s.beforeClose(T):N()}function F(){s.closeOnClickModal&&V()}function U(){Ae&&(p.value=!0)}function a(){p.value=!1}function P(){d("openAutoFocus")}function S(){d("closeAutoFocus")}function ie(T){var B;((B=T.detail)==null?void 0:B.focusReason)==="pointer"&&T.preventDefault()}s.lockScroll&&Ie(p);function re(){s.closeOnPressEscape&&V()}return X(()=>s.modelValue,T=>{T?(y.value=!1,q(),C.value=!0,_.value=Ge(s.zIndex)?h():_.value++,$e(()=>{d("open"),i.value&&(i.value.scrollTop=0)})):p.value&&N()}),X(()=>s.fullscreen,T=>{i.value&&(T?(I=i.value.style.transform,i.value.style.transform=""):i.value.style.transform=I)}),we(()=>{s.modelValue&&(p.value=!0,C.value=!0,q())}),{afterEnter:z,afterLeave:J,beforeLeave:Y,handleClose:V,onModalClick:F,close:N,doClose:a,onOpenAutoFocus:P,onCloseAutoFocus:S,onCloseRequested:re,onFocusoutPrevented:ie,titleId:u,bodyId:$,closed:y,style:w,overlayDialogStyle:M,rendered:C,visible:p,zIndex:_}},to=["aria-label","aria-labelledby","aria-describedby"],ao=G({name:"ElDialog",inheritAttrs:!1}),no=G({...ao,props:oo,emits:so,setup(s,{expose:i}){const l=s,f=De();Ee({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},R(()=>!!f.title));const d=Fe("dialog"),h=g(),I=g(),u=g(),{visible:$,titleId:p,bodyId:y,style:C,overlayDialogStyle:_,rendered:t,zIndex:n,afterEnter:r,afterLeave:w,beforeLeave:M,handleClose:z,onModalClick:J,onOpenAutoFocus:Y,onCloseAutoFocus:q,onCloseRequested:N,onFocusoutPrevented:V}=lo(l,h);Pe(ne,{dialogRef:h,headerRef:I,bodyId:y,ns:d,rendered:t,style:C});const F=ze(J),U=R(()=>l.draggable&&!l.fullscreen);return i({visible:$,dialogContentRef:u}),(a,P)=>(v(),Z(Ve,{to:a.appendTo,disabled:a.appendTo!=="body"?!1:!a.appendToBody},[E(Ne,{name:"dialog-fade",onAfterEnter:o(r),onAfterLeave:o(w),onBeforeLeave:o(M),persisted:""},{default:m(()=>[Se(E(o(Be),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":o(n)},{default:m(()=>[e("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:o(p),"aria-describedby":o(y),class:A(`${o(d).namespace.value}-overlay-dialog`),style:oe(o(_)),onClick:P[0]||(P[0]=(...S)=>o(F).onClick&&o(F).onClick(...S)),onMousedown:P[1]||(P[1]=(...S)=>o(F).onMousedown&&o(F).onMousedown(...S)),onMouseup:P[2]||(P[2]=(...S)=>o(F).onMouseup&&o(F).onMouseup(...S))},[E(o(Le),{loop:"",trapped:o($),"focus-start-el":"container",onFocusAfterTrapped:o(Y),onFocusAfterReleased:o(q),onFocusoutPrevented:o(V),onReleaseRequested:o(N)},{default:m(()=>[o(t)?(v(),Z(eo,Re({key:0,ref_key:"dialogContentRef",ref:u},a.$attrs,{center:a.center,"align-center":a.alignCenter,"close-icon":a.closeIcon,draggable:o(U),overflow:a.overflow,fullscreen:a.fullscreen,"show-close":a.showClose,title:a.title,"aria-level":a.headerAriaLevel,onClose:o(z)}),Oe({header:m(()=>[a.$slots.title?L(a.$slots,"title",{key:1}):L(a.$slots,"header",{key:0,close:o(z),titleId:o(p),titleClass:o(d).e("title")})]),default:m(()=>[L(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:m(()=>[L(a.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):O("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,to)]),_:3},8,["mask","overlay-class","z-index"]),[[Me,o($)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var io=se(no,[["__file","dialog.vue"]]);const ro=qe(io),uo=()=>te.get("/member/order/pre"),co=s=>te.post("/member/order",s),fo=e("h3",null,"切换收货地址",-1),vo={class:"address"},po=["onClick"],_o=e("span",null,"收货人:",-1),ho=e("span",null,"联系方式:",-1),yo=e("span",null,"收货地址:",-1),mo={class:"footer"},go={__name:"dialog",emits:["changeaddress"],setup(s,{expose:i,emit:l}){const f=l,d=g(!1),h=g([]),I=g(0),u=p=>{d.value=!0,h.value=p,console.log(h.value)},$=()=>{f("changeaddress",I.value),d.value=!1};return i({open:u}),(p,y)=>{const C=ae,_=ro;return v(),Z(_,{modelValue:d.value,"onUpdate:modelValue":y[1]||(y[1]=t=>d.value=t),width:"450"},{header:m(()=>[fo]),footer:m(()=>[e("div",mo,[E(C,{onClick:y[0]||(y[0]=t=>d.value=!1)},{default:m(()=>[D("取消")]),_:1}),E(C,{onClick:$},{default:m(()=>[D(" 确定 ")]),_:1})])]),default:m(()=>[e("ul",vo,[(v(!0),b(j,null,K(h.value,(t,n)=>(v(),b("li",{key:t.id,class:A({active:I.value===n}),onClick:r=>I.value=n},[e("p",null,[_o,D(c(t.receiver),1)]),e("p",null,[ho,D(c(t.contact),1)]),e("p",null,[yo,D(c(t.fullLocation+t.address),1)])],10,po))),128))])]),_:1},8,["modelValue"])}}},k=s=>(Ke("data-v-c5a623ec"),s=s(),Ze(),s),Co={class:"checkout"},bo={class:"container"},ko={class:"address"},Io=k(()=>e("h3",null,"收货地址",-1)),$o={class:"address-info"},wo={key:0,class:"text"},To=k(()=>e("span",null,"收货人:",-1)),Ao=k(()=>e("span",null,"联系方式:",-1)),Do=k(()=>e("span",null,"收货地址:",-1)),Eo={class:"action"},Fo={class:"goods"},Po=k(()=>e("h3",null,"商品信息",-1)),So={class:"goods-info"},Bo=k(()=>e("thead",null,[e("th",{width:"400"},"商品信息"),e("th",{width:"220"},"单价"),e("th",{width:"180"},"数量"),e("th",{width:"180"},"小计"),e("th",{width:"140"},"实付")],-1)),Lo={key:0},Ro={class:"info"},Oo=["src"],Mo={class:"name"},No={class:"desc"},Vo={class:"price"},zo={class:"delivery-time"},qo=k(()=>e("h3",null,"配送时间",-1)),Uo={class:"timeInfo"},jo=["onClick"],Ko={class:"payment"},Zo=k(()=>e("h3",null,"支付方式",-1)),Go={class:"paymentInfo"},Jo=["onClick"],Yo={class:"money"},Ho=k(()=>e("h3",null,"金额明细",-1)),Qo={key:0,class:"moneyInfo"},Wo=k(()=>e("dt",null,"商品件数：",-1)),Xo=k(()=>e("dt",null,"商品总价：",-1)),xo=k(()=>e("dt",null,"运费：",-1)),es=k(()=>e("dt",null,"应付总额：",-1)),os={class:"price"},ss={class:"commit"},ls={__name:"index",setup(s){const i=je(),l=g({}),f=g({}),d=g(0),h=g(0),I=["不限送货时间：周一至周日","工作日送货：周一至周五","双休日、假日送货：周六至周日"],u=["在线支付","货到付款","货到付款需付5元手续费"],$=g(null);(async()=>{const _=await uo();l.value=_.result,f.value=l.value.userAddresses.find(t=>t.isDefault==0),f.value||(f.value=l.value.userAddresses[0])})();const y=_=>{f.value=l.value.userAddresses[_]},C=async()=>{const _=await co({deliveryTimeType:1,payType:1,payChannel:1,buyerMessage:"",goods:l.value.goods.map(t=>({skuId:t.skuId,count:t.count})),addressId:f.value.id});i.push({path:"/pay",query:{id:_.result.id}})};return(_,t)=>{const n=ae;return v(),b("div",Co,[e("div",bo,[e("div",ko,[Io,e("div",$o,[f.value.receiver?(v(),b("ul",wo,[e("li",null,[To,D(c(f.value.receiver),1)]),e("li",null,[Ao,D(c(f.value.contact),1)]),e("li",null,[Do,D(c(f.value.fullLocation+f.value.address),1)])])):O("",!0),e("div",Eo,[E(n,{size:"large",onClick:t[0]||(t[0]=r=>$.value.open(l.value.userAddresses))},{default:m(()=>[D("切换地址")]),_:1}),E(n,{size:"large"},{default:m(()=>[D("添加地址")]),_:1})])])]),e("div",Fo,[Po,e("div",So,[e("table",null,[Bo,l.value.goods?(v(),b("tbody",Lo,[(v(!0),b(j,null,K(l.value.goods,r=>(v(),b("tr",{key:r.skuId},[e("td",null,[e("div",Ro,[e("img",{src:r.picture,alt:""},null,8,Oo),e("div",null,[e("p",Mo,c(r.name),1),e("p",No,c(r.attrsText),1)])])]),e("td",null,"￥"+c(r.price),1),e("td",null,c(r.count),1),e("td",Vo,"￥"+c(r.totalPrice),1),e("td",null,"￥"+c(r.totalPayPrice),1)]))),128))])):O("",!0)])])]),e("div",zo,[qo,e("div",Uo,[(v(),b(j,null,K(I,(r,w)=>e("span",{key:w,class:A({active:d.value==w}),onClick:M=>d.value=w},c(r),11,jo)),64))])]),e("div",Ko,[Zo,e("div",Go,[(v(),b(j,null,K(u,(r,w)=>e("span",{key:w,class:A({active:h.value===w}),onClick:M=>h.value=w},c(r),11,Jo)),64))])]),e("div",Yo,[Ho,l.value.summary?(v(),b("div",Qo,[e("dl",null,[Wo,e("dd",null,c(l.value.summary.goodsCount),1)]),e("dl",null,[Xo,e("dd",null,"￥"+c(l.value.summary.totalPrice),1)]),e("dl",null,[xo,e("dd",null,"￥"+c(l.value.summary.postFee),1)]),e("dl",null,[es,e("dd",os,"￥"+c(l.value.summary.totalPayPrice),1)])])):O("",!0)]),e("div",ss,[E(n,{type:"primary",size:"large",onClick:C},{default:m(()=>[D(" 提交订单 ")]),_:1})]),E(go,{ref_key:"dialog",ref:$,onChangeaddress:y},null,512)])])}}},ns=Ue(ls,[["__scopeId","data-v-c5a623ec"]]);export{ns as default};
