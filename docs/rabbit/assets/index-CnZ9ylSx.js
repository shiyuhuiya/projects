import{a9 as te,I as be,W as ie,aq as ke,ar as me,K as ve,as as ge,at as Ae,au as Re,L as Ie,ac as Ce,Z as Be,r as _,av as Ve,aw as Me,C as O,a4 as pe,a5 as Le,a6 as ze,o as d,d as de,a as l,w as I,e,Q as C,m as t,T as _e,ax as De,q as B,S as F,ay as Pe,c as g,F as X,az as He,p as Se,aA as Ye,aB as Fe,R as Xe,aC as Ge,aD as je,b as re,j as Ee,ai as We,P as ue,aj as Ke,ak as qe,U as $e,aE as fe,aF as ee,aG as se,aH as Ue,am as xe,aI as Ze,aJ as Je,t as y,ag as Qe,aK as et,aL as tt,aM as st,aN as at,an as Ne,_ as Oe,h as Te,i as nt,z as ot,k as lt,n as H,u as it,ao as he,aO as rt,G as ct,s as ut,v as dt}from"./index-Bexy76dz.js";/* empty css              */import{E as vt}from"./input-number-CmITgugT.js";import{E as ft,a as mt}from"./breadcrumb-item-BrJMHq0h.js";const pt=(o,h)=>{if(!te||!o||!h)return!1;const r=o.getBoundingClientRect();let n;return h instanceof Element?n=h.getBoundingClientRect():n={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},r.top<n.bottom&&r.bottom>n.top&&r.right>n.left&&r.left<n.right},_t=be({urlList:{type:ie(Array),default:()=>ke([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:ie(String)}}),gt={close:()=>!0,switch:o=>me(o),rotate:o=>me(o)},ht=["src","crossorigin"],yt=ve({name:"ElImageViewer"}),wt=ve({...yt,props:_t,emits:gt,setup(o,{expose:h,emit:r}){var n;const v=o,c={CONTAIN:{name:"contain",icon:ge(Ae)},ORIGINAL:{name:"original",icon:ge(Re)}},{t:U}=Ie(),f=Ce("image-viewer"),{nextZIndex:Y}=Be(),E=_(),$=_([]),P=Ve(),z=_(!0),m=_(v.initialIndex),x=Me(c.CONTAIN),u=_({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),G=_((n=v.zIndex)!=null?n:Y()),ae=O(()=>{const{urlList:a}=v;return a.length<=1}),w=O(()=>m.value===0),L=O(()=>m.value===v.urlList.length-1),M=O(()=>v.urlList[m.value]),ne=O(()=>[f.e("btn"),f.e("prev"),f.is("disabled",!v.infinite&&w.value)]),Z=O(()=>[f.e("btn"),f.e("next"),f.is("disabled",!v.infinite&&L.value)]),j=O(()=>{const{scale:a,deg:i,offsetX:p,offsetY:A,enableTransition:D}=u.value;let S=p/a,R=A/a;switch(i%360){case 90:case-270:[S,R]=[R,-S];break;case 180:case-180:[S,R]=[-S,-R];break;case 270:case-90:[S,R]=[-R,S];break}const Q={transform:`scale(${a}) rotate(${i}deg) translate(${S}px, ${R}px)`,transition:D?"transform .3s":""};return x.value.name===c.CONTAIN.name&&(Q.maxWidth=Q.maxHeight="100%"),Q});function W(){J(),r("close")}function oe(){const a=fe(p=>{switch(p.code){case ee.esc:v.closeOnPressEscape&&W();break;case ee.space:T();break;case ee.left:ce();break;case ee.up:k("zoomIn");break;case ee.right:s();break;case ee.down:k("zoomOut");break}}),i=fe(p=>{const A=p.deltaY||p.deltaX;k(A<0?"zoomIn":"zoomOut",{zoomRate:v.zoomRate,enableTransition:!1})});P.run(()=>{se(document,"keydown",a),se(document,"wheel",i)})}function J(){P.stop()}function K(){z.value=!1}function q(a){z.value=!1,a.target.alt=U("el.image.error")}function b(a){if(z.value||a.button!==0||!E.value)return;u.value.enableTransition=!1;const{offsetX:i,offsetY:p}=u.value,A=a.pageX,D=a.pageY,S=fe(Q=>{u.value={...u.value,offsetX:i+Q.pageX-A,offsetY:p+Q.pageY-D}}),R=se(document,"mousemove",S);se(document,"mouseup",()=>{R()}),a.preventDefault()}function N(){u.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function T(){if(z.value)return;const a=Ue(c),i=Object.values(c),p=x.value.name,D=(i.findIndex(S=>S.name===p)+1)%a.length;x.value=c[a[D]],N()}function le(a){const i=v.urlList.length;m.value=(a+i)%i}function ce(){w.value&&!v.infinite||le(m.value-1)}function s(){L.value&&!v.infinite||le(m.value+1)}function k(a,i={}){if(z.value)return;const{minScale:p,maxScale:A}=v,{zoomRate:D,rotateDeg:S,enableTransition:R}={zoomRate:v.zoomRate,rotateDeg:90,enableTransition:!0,...i};switch(a){case"zoomOut":u.value.scale>p&&(u.value.scale=Number.parseFloat((u.value.scale/D).toFixed(3)));break;case"zoomIn":u.value.scale<A&&(u.value.scale=Number.parseFloat((u.value.scale*D).toFixed(3)));break;case"clockwise":u.value.deg+=S,r("rotate",u.value.deg);break;case"anticlockwise":u.value.deg-=S,r("rotate",u.value.deg);break}u.value.enableTransition=R}return pe(M,()=>{Le(()=>{const a=$.value[0];a!=null&&a.complete||(z.value=!0)})}),pe(m,a=>{N(),r("switch",a)}),ze(()=>{var a,i;oe(),(i=(a=E.value)==null?void 0:a.focus)==null||i.call(a)}),h({setActiveItem:le}),(a,i)=>(d(),de(qe,{to:"body",disabled:!a.teleported},[l(Ke,{name:"viewer-fade",appear:""},{default:I(()=>[e("div",{ref_key:"wrapper",ref:E,tabindex:-1,class:C(t(f).e("wrapper")),style:_e({zIndex:G.value})},[e("div",{class:C(t(f).e("mask")),onClick:i[0]||(i[0]=De(p=>a.hideOnClickModal&&W(),["self"]))},null,2),B(" CLOSE "),e("span",{class:C([t(f).e("btn"),t(f).e("close")]),onClick:W},[l(t(F),null,{default:I(()=>[l(t(Pe))]),_:1})],2),B(" ARROW "),t(ae)?B("v-if",!0):(d(),g(X,{key:0},[e("span",{class:C(t(ne)),onClick:ce},[l(t(F),null,{default:I(()=>[l(t(He))]),_:1})],2),e("span",{class:C(t(Z)),onClick:s},[l(t(F),null,{default:I(()=>[l(t(Se))]),_:1})],2)],64)),B(" ACTIONS "),e("div",{class:C([t(f).e("btn"),t(f).e("actions")])},[e("div",{class:C(t(f).e("actions__inner"))},[l(t(F),{onClick:i[1]||(i[1]=p=>k("zoomOut"))},{default:I(()=>[l(t(Ye))]),_:1}),l(t(F),{onClick:i[2]||(i[2]=p=>k("zoomIn"))},{default:I(()=>[l(t(Fe))]),_:1}),e("i",{class:C(t(f).e("actions__divider"))},null,2),l(t(F),{onClick:T},{default:I(()=>[(d(),de(Xe(t(x).icon)))]),_:1}),e("i",{class:C(t(f).e("actions__divider"))},null,2),l(t(F),{onClick:i[3]||(i[3]=p=>k("anticlockwise"))},{default:I(()=>[l(t(Ge))]),_:1}),l(t(F),{onClick:i[4]||(i[4]=p=>k("clockwise"))},{default:I(()=>[l(t(je))]),_:1})],2)],2),B(" CANVAS "),e("div",{class:C(t(f).e("canvas"))},[(d(!0),g(X,null,re(a.urlList,(p,A)=>Ee((d(),g("img",{ref_for:!0,ref:D=>$.value[A]=D,key:p,src:p,style:_e(t(j)),class:C(t(f).e("img")),crossorigin:a.crossorigin,onLoad:K,onError:q,onMousedown:b},null,46,ht)),[[We,A===m.value]])),128))],2),ue(a.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var bt=$e(wt,[["__file","image-viewer.vue"]]);const kt=xe(bt),It=be({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:ie([String,Object])},previewSrcList:{type:ie(Array),default:()=>ke([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:ie(String)}}),Ct={load:o=>o instanceof Event,error:o=>o instanceof Event,switch:o=>me(o),close:()=>!0,show:()=>!0},Lt=["src","loading","crossorigin"],zt={key:0},St=ve({name:"ElImage",inheritAttrs:!1}),Et=ve({...St,props:It,emits:Ct,setup(o,{emit:h}){const r=o;let n="";const{t:v}=Ie(),c=Ce("image"),U=Ze(),f=Je(),Y=_(),E=_(!1),$=_(!0),P=_(!1),z=_(),m=_(),x=te&&"loading"in HTMLImageElement.prototype;let u,G;const ae=O(()=>[c.e("inner"),M.value&&c.e("preview"),$.value&&c.is("loading")]),w=O(()=>U.style),L=O(()=>{const{fit:s}=r;return te&&s?{objectFit:s}:{}}),M=O(()=>{const{previewSrcList:s}=r;return Array.isArray(s)&&s.length>0}),ne=O(()=>{const{previewSrcList:s,initialIndex:k}=r;let a=k;return k>s.length-1&&(a=0),a}),Z=O(()=>r.loading==="eager"?!1:!x&&r.loading==="lazy"||r.lazy),j=()=>{te&&($.value=!0,E.value=!1,Y.value=r.src)};function W(s){$.value=!1,E.value=!1,h("load",s)}function oe(s){$.value=!1,E.value=!0,h("error",s)}function J(){pt(z.value,m.value)&&(j(),b())}const K=at(J,200,!0);async function q(){var s;if(!te)return;await Le();const{scrollContainer:k}=r;et(k)?m.value=k:tt(k)&&k!==""?m.value=(s=document.querySelector(k))!=null?s:void 0:z.value&&(m.value=st(z.value)),m.value&&(u=se(m,"scroll",K),setTimeout(()=>J(),100))}function b(){!te||!m.value||!K||(u==null||u(),m.value=void 0)}function N(s){if(s.ctrlKey){if(s.deltaY<0)return s.preventDefault(),!1;if(s.deltaY>0)return s.preventDefault(),!1}}function T(){M.value&&(G=se("wheel",N,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",P.value=!0,h("show"))}function le(){G==null||G(),document.body.style.overflow=n,P.value=!1,h("close")}function ce(s){h("switch",s)}return pe(()=>r.src,()=>{Z.value?($.value=!0,E.value=!1,b(),q()):j()}),ze(()=>{Z.value?q():j()}),(s,k)=>(d(),g("div",{ref_key:"container",ref:z,class:C([t(c).b(),s.$attrs.class]),style:_e(t(w))},[E.value?ue(s.$slots,"error",{key:0},()=>[e("div",{class:C(t(c).e("error"))},y(t(v)("el.image.error")),3)]):(d(),g(X,{key:1},[Y.value!==void 0?(d(),g("img",Qe({key:0},t(f),{src:Y.value,loading:s.loading,style:t(L),class:t(ae),crossorigin:s.crossorigin,onClick:T,onLoad:W,onError:oe}),null,16,Lt)):B("v-if",!0),$.value?(d(),g("div",{key:1,class:C(t(c).e("wrapper"))},[ue(s.$slots,"placeholder",{},()=>[e("div",{class:C(t(c).e("placeholder"))},null,2)])],2)):B("v-if",!0)],64)),t(M)?(d(),g(X,{key:2},[P.value?(d(),de(t(kt),{key:0,"z-index":s.zIndex,"initial-index":t(ne),infinite:s.infinite,"zoom-rate":s.zoomRate,"min-scale":s.minScale,"max-scale":s.maxScale,"url-list":s.previewSrcList,crossorigin:s.crossorigin,"hide-on-click-modal":s.hideOnClickModal,teleported:s.previewTeleported,"close-on-press-escape":s.closeOnPressEscape,onClose:le,onSwitch:ce},{default:I(()=>[s.$slots.viewer?(d(),g("div",zt,[ue(s.$slots,"viewer")])):B("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):B("v-if",!0)],64)):B("v-if",!0)],6))}});var $t=$e(Et,[["__file","image.vue"]]);const xt=xe($t),Nt=o=>Ne.get("/goods",{params:{id:o}}),ye=({id:o,type:h,limit:r=3})=>Ne.get("/goods/hot",{params:{id:o,type:h,limit:r}}),Ot={class:"hotgoods"},Tt={alt:""},At={class:"name ellipsis"},Rt={class:"desc ellipsis"},Bt={class:"price"},Vt={__name:"HotGoodsItem",props:{item:Array,title:String},setup(o){return(h,r)=>{const n=Te("RouterLink"),v=nt("lazy-load");return d(),g("div",Ot,[e("h3",null,y(o.title),1),e("ul",null,[(d(!0),g(X,null,re(o.item,c=>(d(),g("li",{key:c.id},[l(n,{to:`/detail/${c.id}`},{default:I(()=>[Ee(e("img",Tt,null,512),[[v,c.picture]]),e("p",At,y(c.name),1),e("p",Rt,y(c.desc),1),e("p",Bt,y(c.price),1)]),_:2},1032,["to"])]))),128))])])}}},we=Oe(Vt,[["__scopeId","data-v-439bc940"]]),V=o=>(ut("data-v-d2f6098e"),o=o(),dt(),o),Mt={class:"detail"},Dt={key:0,class:"container"},Pt={class:"info"},Ht={class:"media"},Yt={class:"goods-image"},Ft={class:"small-image"},Xt=["onMouseover"],Gt=["src"],jt={class:"goods-sale"},Wt=V(()=>e("p",null,"销量人气",-1)),Kt=V(()=>e("p",null,[e("i",{class:"iconfont icon-task-filling"}),H("销量人气")],-1)),qt=V(()=>e("p",null,"商品评价",-1)),Ut=V(()=>e("p",null,[e("i",{class:"iconfont icon-comment-filling"}),H("商品评价")],-1)),Zt=V(()=>e("p",null,"收藏人气",-1)),Jt=V(()=>e("p",null,[e("i",{class:"iconfont icon-favorite-filling"}),H("收藏人气")],-1)),Qt=V(()=>e("p",null,"品牌信息",-1)),es=V(()=>e("p",null,[e("i",{class:"iconfont icon-dynamic-filling"}),H("品牌主页")],-1)),ts={class:"spec"},ss={class:"name"},as={class:"desc"},ns={class:"price"},os=V(()=>e("div",{class:"service"},[e("dl",null,[e("dt",null,"促销"),e("dd",null,"12月好物放送，App领券购买直降120元")]),e("dl",null,[e("dt",null,"服务"),e("dd",null,[e("span",null,"无忧退货"),e("span",null,"快速退款"),e("span",null,"免费包邮"),e("a",{href:"javascript:;"},"了解详情")])])],-1)),ls={class:"num-input"},is={class:"button"},rs={class:"goods-footer"},cs={class:"goods-tab"},us=V(()=>e("div",{class:"nav"},"商品详情",-1)),ds={class:"goods-detail"},vs={class:"attrs"},fs=V(()=>e("li",null,null,-1)),ms={class:"image"},ps={class:"goods-aside"},_s={__name:"index",setup(o){const h=it(),r=_(0),n=_({}),v=_([]),c=_([]),U=async w=>{const L=await Nt(w);n.value=L.result,v.value=L.result.mainPictures,c.value=L.result.details.pictures};U(h.params.id);const f=_([]),Y=_([]),E={id:h.params.id,type:1},$={id:h.params.id,type:2},P=async w=>{const L=await ye(w);f.value=L.result},z=async w=>{const L=await ye(w);Y.value=L.result};P(E),z($);const m=_(1);let x={};const u=w=>{x=w},G=ot(),ae=()=>{x.skuId?(G.addCart({id:n.value.id,name:n.value.name,picture:n.value.mainPictures[0],price:x.price,count:m.value,skuId:x.skuId,attrsText:x.specsText,selected:!0}),he.success("加入购物车成功！")):he.error("请先选择商品规格")};return lt(async w=>{m.value=1,x.value={},U(w.params.id),E.id=w.params.id,$.id=w.params.id,P(E),z($)}),(w,L)=>{var K,q;const M=ft,ne=mt,Z=rt,j=Te("Sku"),W=vt,oe=ct,J=xt;return d(),g("div",Mt,[n.value.id?(d(),g("div",Dt,[l(ne,{"separator-icon":t(Se)},{default:I(()=>{var b,N;return[l(M,{to:{path:"/"}},{default:I(()=>[H("首页")]),_:1}),l(M,{to:{path:`/category/${(b=n.value.categories)==null?void 0:b[1].id}`}},{default:I(()=>{var T;return[H(y((T=n.value.categories)==null?void 0:T[1].name),1)]}),_:1},8,["to"]),l(M,{to:{path:`/category/sub/${(N=n.value.categories)==null?void 0:N[0].id}`}},{default:I(()=>{var T;return[H(y((T=n.value.categories)==null?void 0:T[0].name),1)]}),_:1},8,["to"]),l(M,{to:{path:`/detail/${n.value.id}`}},{default:I(()=>[H(y(n.value.name),1)]),_:1},8,["to"])]}),_:1},8,["separator-icon"]),e("div",Pt,[e("div",Ht,[e("div",Yt,[l(Z,{image:v.value[r.value]},null,8,["image"]),e("ul",Ft,[(d(!0),g(X,null,re(v.value,(b,N)=>(d(),g("li",{key:N,class:C({active:N===r.value}),onMouseover:T=>r.value=N},[e("img",{src:b,alt:""},null,8,Gt)],42,Xt))),128))])]),e("ul",jt,[e("li",null,[Wt,e("p",null,y(n.value.salesCount+"+"),1),Kt]),e("li",null,[qt,e("p",null,y(n.value.commentCount+"+"),1),Ut]),e("li",null,[Zt,e("p",null,y(n.value.collectCount+"+"),1),Jt]),e("li",null,[Qt,e("p",null,y((K=n.value.brand)==null?void 0:K.name),1),es])])]),e("div",ts,[e("h3",ss,y(n.value.name),1),e("p",as,y(n.value.desc),1),e("p",ns,[e("span",null,y("￥"+n.value.price),1),e("span",null,y("￥"+n.value.oldPrice),1)]),os,l(j,{goods:n.value,onChange:u},null,8,["goods"]),e("div",ls,[l(W,{modelValue:m.value,"onUpdate:modelValue":L[0]||(L[0]=b=>m.value=b),min:1,max:10},null,8,["modelValue"])]),e("div",is,[l(oe,{size:"large",onClick:ae},{default:I(()=>[H(" 加入购物车 ")]),_:1})])])]),e("div",rs,[e("div",cs,[us,e("div",ds,[e("ul",vs,[(d(!0),g(X,null,re((q=n.value.details)==null?void 0:q.properties,b=>(d(),g("li",{key:b.name},[e("span",null,y(b.name),1),e("span",null,y(b.value),1)]))),128)),fs]),e("div",ms,[(d(!0),g(X,null,re(c.value,(b,N)=>(d(),de(J,{key:N,src:b,lazy:"",fit:"cover"},null,8,["src"]))),128))])])]),e("div",ps,[l(we,{item:f.value,title:"24小时热榜"},null,8,["item"]),l(we,{item:Y.value,title:"周热榜"},null,8,["item"])])])])):B("",!0)])}}},bs=Oe(_s,[["__scopeId","data-v-d2f6098e"]]);export{bs as default};
