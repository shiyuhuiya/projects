import{M as ke,$ as ie,at as be,au as me,O as ve,av as ge,aw as Ae,ax as Be,P as Ie,af as Le,a2 as Ve,r as _,ay as Me,az as Re,J as O,a8 as pe,z as ze,a9 as Ce,o as u,d as de,a as o,w as b,e,U as I,m as t,X as _e,aA as Pe,q as V,W as X,aB as De,c as g,F,aC as He,p as Se,aD as Ye,aE as Xe,V as Fe,aF as Ge,aG as je,b as re,j as Ee,al as We,T as ue,am as Ke,an as qe,Y as $e,B as fe,aH as ee,aI as te,aJ as Ue,ap as xe,aK as Je,aL as Ze,ac as le,t as h,aj as Qe,aM as et,aN as tt,A as st,aO as at,aq as Ne,_ as Oe,h as Te,i as nt,G as ot,k as lt,n as H,u as it,ar as he,aP as rt,L as ct,s as ut,v as dt}from"./index-CNV5tPLO.js";/* empty css              */import{E as vt}from"./input-number-BgEDsfIh.js";import{E as ft,a as mt}from"./breadcrumb-item-BicK8QLd.js";import{i as pt}from"./position-D3PGF8Pq.js";const _t=ke({urlList:{type:ie(Array),default:()=>be([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:ie(String)}}),gt={close:()=>!0,switch:i=>me(i),rotate:i=>me(i)},ht=["src","crossorigin"],yt=ve({name:"ElImageViewer"}),wt=ve({...yt,props:_t,emits:gt,setup(i,{expose:z,emit:m}){var n;const d=i,r={CONTAIN:{name:"contain",icon:ge(Ae)},ORIGINAL:{name:"original",icon:ge(Be)}},{t:U}=Ie(),v=Le("image-viewer"),{nextZIndex:Y}=Ve(),E=_(),$=_([]),D=Me(),C=_(!0),f=_(d.initialIndex),x=Re(r.CONTAIN),c=_({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),G=_((n=d.zIndex)!=null?n:Y()),se=O(()=>{const{urlList:a}=d;return a.length<=1}),y=O(()=>f.value===0),L=O(()=>f.value===d.urlList.length-1),R=O(()=>d.urlList[f.value]),ae=O(()=>[v.e("btn"),v.e("prev"),v.is("disabled",!d.infinite&&y.value)]),J=O(()=>[v.e("btn"),v.e("next"),v.is("disabled",!d.infinite&&L.value)]),j=O(()=>{const{scale:a,deg:l,offsetX:p,offsetY:A,enableTransition:P}=c.value;let S=p/a,B=A/a;switch(l%360){case 90:case-270:[S,B]=[B,-S];break;case 180:case-180:[S,B]=[-S,-B];break;case 270:case-90:[S,B]=[-B,S];break}const Q={transform:`scale(${a}) rotate(${l}deg) translate(${S}px, ${B}px)`,transition:P?"transform .3s":""};return x.value.name===r.CONTAIN.name&&(Q.maxWidth=Q.maxHeight="100%"),Q});function W(){Z(),m("close")}function ne(){const a=fe(p=>{switch(p.code){case ee.esc:d.closeOnPressEscape&&W();break;case ee.space:T();break;case ee.left:ce();break;case ee.up:k("zoomIn");break;case ee.right:s();break;case ee.down:k("zoomOut");break}}),l=fe(p=>{const A=p.deltaY||p.deltaX;k(A<0?"zoomIn":"zoomOut",{zoomRate:d.zoomRate,enableTransition:!1})});D.run(()=>{te(document,"keydown",a),te(document,"wheel",l)})}function Z(){D.stop()}function K(){C.value=!1}function q(a){C.value=!1,a.target.alt=U("el.image.error")}function w(a){if(C.value||a.button!==0||!E.value)return;c.value.enableTransition=!1;const{offsetX:l,offsetY:p}=c.value,A=a.pageX,P=a.pageY,S=fe(Q=>{c.value={...c.value,offsetX:l+Q.pageX-A,offsetY:p+Q.pageY-P}}),B=te(document,"mousemove",S);te(document,"mouseup",()=>{B()}),a.preventDefault()}function N(){c.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function T(){if(C.value)return;const a=Ue(r),l=Object.values(r),p=x.value.name,P=(l.findIndex(S=>S.name===p)+1)%a.length;x.value=r[a[P]],N()}function oe(a){const l=d.urlList.length;f.value=(a+l)%l}function ce(){y.value&&!d.infinite||oe(f.value-1)}function s(){L.value&&!d.infinite||oe(f.value+1)}function k(a,l={}){if(C.value)return;const{minScale:p,maxScale:A}=d,{zoomRate:P,rotateDeg:S,enableTransition:B}={zoomRate:d.zoomRate,rotateDeg:90,enableTransition:!0,...l};switch(a){case"zoomOut":c.value.scale>p&&(c.value.scale=Number.parseFloat((c.value.scale/P).toFixed(3)));break;case"zoomIn":c.value.scale<A&&(c.value.scale=Number.parseFloat((c.value.scale*P).toFixed(3)));break;case"clockwise":c.value.deg+=S,m("rotate",c.value.deg);break;case"anticlockwise":c.value.deg-=S,m("rotate",c.value.deg);break}c.value.enableTransition=B}return pe(R,()=>{ze(()=>{const a=$.value[0];a!=null&&a.complete||(C.value=!0)})}),pe(f,a=>{N(),m("switch",a)}),Ce(()=>{var a,l;ne(),(l=(a=E.value)==null?void 0:a.focus)==null||l.call(a)}),z({setActiveItem:oe}),(a,l)=>(u(),de(qe,{to:"body",disabled:!a.teleported},[o(Ke,{name:"viewer-fade",appear:""},{default:b(()=>[e("div",{ref_key:"wrapper",ref:E,tabindex:-1,class:I(t(v).e("wrapper")),style:_e({zIndex:G.value})},[e("div",{class:I(t(v).e("mask")),onClick:l[0]||(l[0]=Pe(p=>a.hideOnClickModal&&W(),["self"]))},null,2),V(" CLOSE "),e("span",{class:I([t(v).e("btn"),t(v).e("close")]),onClick:W},[o(t(X),null,{default:b(()=>[o(t(De))]),_:1})],2),V(" ARROW "),t(se)?V("v-if",!0):(u(),g(F,{key:0},[e("span",{class:I(t(ae)),onClick:ce},[o(t(X),null,{default:b(()=>[o(t(He))]),_:1})],2),e("span",{class:I(t(J)),onClick:s},[o(t(X),null,{default:b(()=>[o(t(Se))]),_:1})],2)],64)),V(" ACTIONS "),e("div",{class:I([t(v).e("btn"),t(v).e("actions")])},[e("div",{class:I(t(v).e("actions__inner"))},[o(t(X),{onClick:l[1]||(l[1]=p=>k("zoomOut"))},{default:b(()=>[o(t(Ye))]),_:1}),o(t(X),{onClick:l[2]||(l[2]=p=>k("zoomIn"))},{default:b(()=>[o(t(Xe))]),_:1}),e("i",{class:I(t(v).e("actions__divider"))},null,2),o(t(X),{onClick:T},{default:b(()=>[(u(),de(Fe(t(x).icon)))]),_:1}),e("i",{class:I(t(v).e("actions__divider"))},null,2),o(t(X),{onClick:l[3]||(l[3]=p=>k("anticlockwise"))},{default:b(()=>[o(t(Ge))]),_:1}),o(t(X),{onClick:l[4]||(l[4]=p=>k("clockwise"))},{default:b(()=>[o(t(je))]),_:1})],2)],2),V(" CANVAS "),e("div",{class:I(t(v).e("canvas"))},[(u(!0),g(F,null,re(a.urlList,(p,A)=>Ee((u(),g("img",{ref_for:!0,ref:P=>$.value[A]=P,key:p,src:p,style:_e(t(j)),class:I(t(v).e("img")),crossorigin:a.crossorigin,onLoad:K,onError:q,onMousedown:w},null,46,ht)),[[We,A===f.value]])),128))],2),ue(a.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var kt=$e(wt,[["__file","image-viewer.vue"]]);const bt=xe(kt),It=ke({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:ie([String,Object])},previewSrcList:{type:ie(Array),default:()=>be([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:ie(String)}}),Lt={load:i=>i instanceof Event,error:i=>i instanceof Event,switch:i=>me(i),close:()=>!0,show:()=>!0},zt=["src","loading","crossorigin"],Ct={key:0},St=ve({name:"ElImage",inheritAttrs:!1}),Et=ve({...St,props:It,emits:Lt,setup(i,{emit:z}){const m=i;let n="";const{t:d}=Ie(),r=Le("image"),U=Je(),v=Ze(),Y=_(),E=_(!1),$=_(!0),D=_(!1),C=_(),f=_(),x=le&&"loading"in HTMLImageElement.prototype;let c,G;const se=O(()=>[r.e("inner"),R.value&&r.e("preview"),$.value&&r.is("loading")]),y=O(()=>U.style),L=O(()=>{const{fit:s}=m;return le&&s?{objectFit:s}:{}}),R=O(()=>{const{previewSrcList:s}=m;return Array.isArray(s)&&s.length>0}),ae=O(()=>{const{previewSrcList:s,initialIndex:k}=m;let a=k;return k>s.length-1&&(a=0),a}),J=O(()=>m.loading==="eager"?!1:!x&&m.loading==="lazy"||m.lazy),j=()=>{le&&($.value=!0,E.value=!1,Y.value=m.src)};function W(s){$.value=!1,E.value=!1,z("load",s)}function ne(s){$.value=!1,E.value=!0,z("error",s)}function Z(){pt(C.value,f.value)&&(j(),w())}const K=at(Z,200,!0);async function q(){var s;if(!le)return;await ze();const{scrollContainer:k}=m;et(k)?f.value=k:tt(k)&&k!==""?f.value=(s=document.querySelector(k))!=null?s:void 0:C.value&&(f.value=st(C.value)),f.value&&(c=te(f,"scroll",K),setTimeout(()=>Z(),100))}function w(){!le||!f.value||!K||(c==null||c(),f.value=void 0)}function N(s){if(s.ctrlKey){if(s.deltaY<0)return s.preventDefault(),!1;if(s.deltaY>0)return s.preventDefault(),!1}}function T(){R.value&&(G=te("wheel",N,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",D.value=!0,z("show"))}function oe(){G==null||G(),document.body.style.overflow=n,D.value=!1,z("close")}function ce(s){z("switch",s)}return pe(()=>m.src,()=>{J.value?($.value=!0,E.value=!1,w(),q()):j()}),Ce(()=>{J.value?q():j()}),(s,k)=>(u(),g("div",{ref_key:"container",ref:C,class:I([t(r).b(),s.$attrs.class]),style:_e(t(y))},[E.value?ue(s.$slots,"error",{key:0},()=>[e("div",{class:I(t(r).e("error"))},h(t(d)("el.image.error")),3)]):(u(),g(F,{key:1},[Y.value!==void 0?(u(),g("img",Qe({key:0},t(v),{src:Y.value,loading:s.loading,style:t(L),class:t(se),crossorigin:s.crossorigin,onClick:T,onLoad:W,onError:ne}),null,16,zt)):V("v-if",!0),$.value?(u(),g("div",{key:1,class:I(t(r).e("wrapper"))},[ue(s.$slots,"placeholder",{},()=>[e("div",{class:I(t(r).e("placeholder"))},null,2)])],2)):V("v-if",!0)],64)),t(R)?(u(),g(F,{key:2},[D.value?(u(),de(t(bt),{key:0,"z-index":s.zIndex,"initial-index":t(ae),infinite:s.infinite,"zoom-rate":s.zoomRate,"min-scale":s.minScale,"max-scale":s.maxScale,"url-list":s.previewSrcList,crossorigin:s.crossorigin,"hide-on-click-modal":s.hideOnClickModal,teleported:s.previewTeleported,"close-on-press-escape":s.closeOnPressEscape,onClose:oe,onSwitch:ce},{default:b(()=>[s.$slots.viewer?(u(),g("div",Ct,[ue(s.$slots,"viewer")])):V("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):V("v-if",!0)],64)):V("v-if",!0)],6))}});var $t=$e(Et,[["__file","image.vue"]]);const xt=xe($t),Nt=i=>Ne.get("/goods",{params:{id:i}}),ye=({id:i,type:z,limit:m=3})=>Ne.get("/goods/hot",{params:{id:i,type:z,limit:m}}),Ot={class:"hotgoods"},Tt={alt:""},At={class:"name ellipsis"},Bt={class:"desc ellipsis"},Vt={class:"price"},Mt={__name:"HotGoodsItem",props:{item:Array,title:String},setup(i){return(z,m)=>{const n=Te("RouterLink"),d=nt("lazy-load");return u(),g("div",Ot,[e("h3",null,h(i.title),1),e("ul",null,[(u(!0),g(F,null,re(i.item,r=>(u(),g("li",{key:r.id},[o(n,{to:`/detail/${r.id}`},{default:b(()=>[Ee(e("img",Tt,null,512),[[d,r.picture]]),e("p",At,h(r.name),1),e("p",Bt,h(r.desc),1),e("p",Vt,h(r.price),1)]),_:2},1032,["to"])]))),128))])])}}},we=Oe(Mt,[["__scopeId","data-v-439bc940"]]),M=i=>(ut("data-v-d2f6098e"),i=i(),dt(),i),Rt={class:"detail"},Pt={key:0,class:"container"},Dt={class:"info"},Ht={class:"media"},Yt={class:"goods-image"},Xt={class:"small-image"},Ft=["onMouseover"],Gt=["src"],jt={class:"goods-sale"},Wt=M(()=>e("p",null,"销量人气",-1)),Kt=M(()=>e("p",null,[e("i",{class:"iconfont icon-task-filling"}),H("销量人气")],-1)),qt=M(()=>e("p",null,"商品评价",-1)),Ut=M(()=>e("p",null,[e("i",{class:"iconfont icon-comment-filling"}),H("商品评价")],-1)),Jt=M(()=>e("p",null,"收藏人气",-1)),Zt=M(()=>e("p",null,[e("i",{class:"iconfont icon-favorite-filling"}),H("收藏人气")],-1)),Qt=M(()=>e("p",null,"品牌信息",-1)),es=M(()=>e("p",null,[e("i",{class:"iconfont icon-dynamic-filling"}),H("品牌主页")],-1)),ts={class:"spec"},ss={class:"name"},as={class:"desc"},ns={class:"price"},os=M(()=>e("div",{class:"service"},[e("dl",null,[e("dt",null,"促销"),e("dd",null,"12月好物放送，App领券购买直降120元")]),e("dl",null,[e("dt",null,"服务"),e("dd",null,[e("span",null,"无忧退货"),e("span",null,"快速退款"),e("span",null,"免费包邮"),e("a",{href:"javascript:;"},"了解详情")])])],-1)),ls={class:"num-input"},is={class:"button"},rs={class:"goods-footer"},cs={class:"goods-tab"},us=M(()=>e("div",{class:"nav"},"商品详情",-1)),ds={class:"goods-detail"},vs={class:"attrs"},fs=M(()=>e("li",null,null,-1)),ms={class:"image"},ps={class:"goods-aside"},_s={__name:"index",setup(i){const z=it(),m=_(0),n=_({}),d=_([]),r=_([]),U=async y=>{const L=await Nt(y);n.value=L.result,d.value=L.result.mainPictures,r.value=L.result.details.pictures};U(z.params.id);const v=_([]),Y=_([]),E={id:z.params.id,type:1},$={id:z.params.id,type:2},D=async y=>{const L=await ye(y);v.value=L.result},C=async y=>{const L=await ye(y);Y.value=L.result};D(E),C($);const f=_(1);let x={};const c=y=>{x=y},G=ot(),se=()=>{x.skuId?(G.addCart({id:n.value.id,name:n.value.name,picture:n.value.mainPictures[0],price:x.price,count:f.value,skuId:x.skuId,attrsText:x.specsText,selected:!0}),he.success("加入购物车成功！")):he.error("请先选择商品规格")};return lt(async y=>{f.value=1,x.value={},U(y.params.id),E.id=y.params.id,$.id=y.params.id,D(E),C($)}),(y,L)=>{var K,q;const R=ft,ae=mt,J=rt,j=Te("Sku"),W=vt,ne=ct,Z=xt;return u(),g("div",Rt,[n.value.id?(u(),g("div",Pt,[o(ae,{"separator-icon":t(Se)},{default:b(()=>{var w,N;return[o(R,{to:{path:"/"}},{default:b(()=>[H("首页")]),_:1}),o(R,{to:{path:`/category/${(w=n.value.categories)==null?void 0:w[1].id}`}},{default:b(()=>{var T;return[H(h((T=n.value.categories)==null?void 0:T[1].name),1)]}),_:1},8,["to"]),o(R,{to:{path:`/category/sub/${(N=n.value.categories)==null?void 0:N[0].id}`}},{default:b(()=>{var T;return[H(h((T=n.value.categories)==null?void 0:T[0].name),1)]}),_:1},8,["to"]),o(R,{to:{path:`/detail/${n.value.id}`}},{default:b(()=>[H(h(n.value.name),1)]),_:1},8,["to"])]}),_:1},8,["separator-icon"]),e("div",Dt,[e("div",Ht,[e("div",Yt,[o(J,{image:d.value[m.value]},null,8,["image"]),e("ul",Xt,[(u(!0),g(F,null,re(d.value,(w,N)=>(u(),g("li",{key:N,class:I({active:N===m.value}),onMouseover:T=>m.value=N},[e("img",{src:w,alt:""},null,8,Gt)],42,Ft))),128))])]),e("ul",jt,[e("li",null,[Wt,e("p",null,h(n.value.salesCount+"+"),1),Kt]),e("li",null,[qt,e("p",null,h(n.value.commentCount+"+"),1),Ut]),e("li",null,[Jt,e("p",null,h(n.value.collectCount+"+"),1),Zt]),e("li",null,[Qt,e("p",null,h((K=n.value.brand)==null?void 0:K.name),1),es])])]),e("div",ts,[e("h3",ss,h(n.value.name),1),e("p",as,h(n.value.desc),1),e("p",ns,[e("span",null,h("￥"+n.value.price),1),e("span",null,h("￥"+n.value.oldPrice),1)]),os,o(j,{goods:n.value,onChange:c},null,8,["goods"]),e("div",ls,[o(W,{modelValue:f.value,"onUpdate:modelValue":L[0]||(L[0]=w=>f.value=w),min:1,max:10},null,8,["modelValue"])]),e("div",is,[o(ne,{size:"large",onClick:se},{default:b(()=>[H(" 加入购物车 ")]),_:1})])])]),e("div",rs,[e("div",cs,[us,e("div",ds,[e("ul",vs,[(u(!0),g(F,null,re((q=n.value.details)==null?void 0:q.properties,w=>(u(),g("li",{key:w.name},[e("span",null,h(w.name),1),e("span",null,h(w.value),1)]))),128)),fs]),e("div",ms,[(u(!0),g(F,null,re(r.value,(w,N)=>(u(),de(Z,{key:N,src:w,lazy:"",fit:"cover"},null,8,["src"]))),128))])])]),e("div",ps,[o(we,{item:v.value,title:"24小时热榜"},null,8,["item"]),o(we,{item:Y.value,title:"周热榜"},null,8,["item"])])])])):V("",!0)])}}},bs=Oe(_s,[["__scopeId","data-v-d2f6098e"]]);export{bs as default};
