import{_ as T,r as u,h as V,i as f,o as d,c as _,e as l,a,w as n,n as v,t as c,m as k,p as F,j as h,F as z,b as D,u as $,x as A,y}from"./index-BOcrrdDX.js";import{E as L,a as P}from"./tab-pane-CSJ5Jhwn.js";import{E as j,a as R}from"./breadcrumb-item-DInB5Mmc.js";const U={class:"subCategory"},q={class:"container"},G={class:"goods"},H={class:"body"},J={alt:""},K={class:"name ellipsis"},M={class:"desc ellipsis"},O={class:"price"},Q={__name:"index",setup(W){const C=$(),o=u({});(async r=>{const e=await A(r);o.value=e.result})(C.params.id);const i=u([]),s=u({categoryId:o.value.id,page:1,pageSize:20,sortField:"publishTime"}),b=async r=>{const e=await y(r);i.value=e.result.items};b(s.value);const w=()=>{s.value.page=1,b(s.value)},g=u(!1),x=async()=>{if(g.value)return;s.value.page+=1;const e=(await y(s.value)).result.items;e.length==0&&(g.value=!0),i.value=[...i.value,...e]};return(r,e)=>{const p=j,E=R,m=L,S=P,B=V("router-link"),I=f("lazy-load"),N=f("infinite");return d(),_("div",U,[l("div",q,[a(E,{"separator-icon":k(F)},{default:n(()=>[a(p,{to:{path:"/"}},{default:n(()=>[v("首页")]),_:1}),a(p,{to:{path:`/category/${o.value.parentId}`}},{default:n(()=>[v(c(o.value.parentName),1)]),_:1},8,["to"]),a(p,{to:{path:`/category/sub/${o.value.id}`}},{default:n(()=>[v(c(o.value.name),1)]),_:1},8,["to"])]),_:1},8,["separator-icon"]),l("div",G,[a(S,{modelValue:s.value.sortField,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.sortField=t),class:"demo-tabs",onTabChange:w},{default:n(()=>[a(m,{label:"最新商品",name:"pubishTime"}),a(m,{label:"最高人气",name:"orderNum"}),a(m,{label:"评论最多",name:"evaluateNum"})]),_:1},8,["modelValue"]),h((d(),_("ul",H,[(d(!0),_(z,null,D(i.value,t=>(d(),_("li",{key:t.id},[a(B,{to:`/detail/${t.id}`},{default:n(()=>[h(l("img",J,null,512),[[I,t.picture]]),l("p",K,c(t.name),1),l("p",M,c(t.desc),1),l("p",O,c(t.price),1)]),_:2},1032,["to"])]))),128))])),[[N,x]])])])])}}},ae=T(Q,[["__scopeId","data-v-e81e5170"]]);export{ae as default};
