import{E as e,X as a,f as l,o as t,c as s,w as c,a as r,A as n,r as o,b as i,t as u,p as h,d,Y as p,i as f,e as m,Z as y,g as b,h as _,F as v,P as x,_ as g,n as w}from"./index-CnChCGCE.js";import{_ as k}from"./uni-icons.ZeMslxzL.js";import{_ as V,r as S}from"./uni-app.es.DI07t6-z.js";const C={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:$}=e(C);const B=V({name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:""},bgColor:{type:String,default:"#F8F8F8"},textColor:{type:String,default:"#000000"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||$("uni-search-bar.cancel")},placeholderText(){return this.placeholder||$("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,a){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.searchVal="",this.$nextTick((()=>{this.$emit("clear",{value:""})}))},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,a())},confirm(){a(),this.$emit("confirm",{value:this.searchVal})},blur(){a(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}},[["render",function(e,a,m,y,b,_){const v=S(l("uni-icons"),k),x=d,g=p,w=f;return t(),s(x,{class:"uni-searchbar"},{default:c((()=>[r(x,{style:n({borderRadius:m.radius+"px",backgroundColor:m.bgColor}),class:"uni-searchbar__box",onClick:_.searchClick},{default:c((()=>[r(x,{class:"uni-searchbar__box-icon-search"},{default:c((()=>[o(e.$slots,"searchIcon",{},(()=>[r(v,{color:"#c0c4cc",size:"18",type:"search"})]),!0)])),_:3}),b.show||b.searchVal?(t(),s(g,{key:0,focus:b.showSync,disabled:m.readonly,placeholder:_.placeholderText,maxlength:m.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text",modelValue:b.searchVal,"onUpdate:modelValue":a[0]||(a[0]=e=>b.searchVal=e),style:n({color:m.textColor}),onConfirm:_.confirm,onBlur:_.blur,onFocus:_.emitFocus},null,8,["focus","disabled","placeholder","maxlength","modelValue","style","onConfirm","onBlur","onFocus"])):(t(),s(w,{key:1,class:"uni-searchbar__text-placeholder"},{default:c((()=>[i(u(m.placeholder),1)])),_:1})),b.show&&("always"===m.clearButton||"auto"===m.clearButton&&""!==b.searchVal)&&!m.readonly?(t(),s(x,{key:2,class:"uni-searchbar__box-icon-clear",onClick:_.clear},{default:c((()=>[o(e.$slots,"clearIcon",{},(()=>[r(v,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])),_:3},8,["onClick"])):h("",!0)])),_:3},8,["style","onClick"]),"always"===m.cancelButton||b.show&&"auto"===m.cancelButton?(t(),s(w,{key:0,onClick:_.cancel,class:"uni-searchbar__cancel"},{default:c((()=>[i(u(_.cancelTextI18n),1)])),_:1},8,["onClick"])):h("",!0)])),_:3})}],["__scopeId","data-v-314f636a"]]),T=V({__name:"search",setup(e){const a=m(JSON.parse(y("history")||"[]")),n=m("");function o(e){if(!e.value.trim().length)return void x({title:"请输入内容！",icon:"error"});const l=a.value.findIndex((a=>a==e.value.trim()));-1!==l&&a.value.splice(l,1),a.value.unshift(e.value.trim()),g("history",JSON.stringify(a.value)),w({url:`/pages/sub/wallpaperList/wallpaperList?name=${e.value.trim()}&keyword=${e.value.trim()}`}),n.value=""}function h(){a.value=[],g("history",JSON.stringify(a.value))}return(e,p)=>{const m=S(l("uni-search-bar"),B),y=d,x=f,V=S(l("uni-icons"),k);return t(),s(y,{class:"container"},{default:c((()=>[r(y,{class:"search"},{default:c((()=>[r(m,{onConfirm:o,focus:!0,modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=e=>n.value=e)},null,8,["modelValue"])])),_:1}),r(y,{class:"recently"},{default:c((()=>[r(y,{class:"head"},{default:c((()=>[r(x,null,{default:c((()=>[i("最近搜索")])),_:1}),r(y,{class:"trash"},{default:c((()=>[r(V,{type:"trash",size:"24",onClick:h})])),_:1})])),_:1}),r(y,{class:"content"},{default:c((()=>[(t(!0),b(v,null,_(a.value,((e,l)=>(t(),s(y,{class:"tab",key:l,onClick:l=>function(e){const l=a.value.findIndex((a=>a==e));a.value.splice(l,1),a.value.unshift(e),g("history",JSON.stringify(a.value)),w({url:`/pages/sub/wallpaperList/wallpaperList?name=${e}&keyword=${e}`})}(e)},{default:c((()=>[i(u(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-8b11f754"]]);export{T as default};
